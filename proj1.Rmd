---
title: "Project 1"
author: "Eliada Deschamps, Jack Grinblatt, Jon Tao, Ketan Kshirsagar, Aksshath Soundarrarajan"
date: "3/20/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
# Data Model


## Import Data

```{r}

listings <- read.csv("ProjectA_Listings2013.csv")


```


## Clense Data
```{r}

listings$loan_status <- as.factor(listings$loan_status)
listings$prosper_rating <-as.factor(listings$prosper_rating)
listings$scorex <-as.factor(listings$scorex)
listings$income_range <-as.factor(listings$income_range)
listings$income_range_description <-as.factor(listings$income_range_description)
listings$employment_status_description <-as.factor(listings$employment_status_description)
listings$occupation <-as.factor(listings$occupation)
listings$borrower_state <-as.factor(listings$borrower_state)
listings$borrower_city <-as.factor(listings$borrower_city)
listings$loan_status_description <- as.factor(listings$loan_status_description)
listings$loan_origination_date <- as.factor(listings$loan_origination_date)
listings$first_recorded_credit_line <- as.factor(substr(listings$first_recorded_credit_line, nchar(listings$first_recorded_credit_line)-3, nchar(listings$first_recorded_credit_line)))
listings$income_verifiable <- as.factor(listings$income_verifiable)
listings$is_homeowner <- as.factor(listings$is_homeowner)

str(listings)
summary(listings)

```


# Build Linear Regression Models 
## Model 1
### Includes Only Variables with Significant Correlation
```{r}
model1 <-lm(borrower_rate ~ number_of_days + principal_balance + loan_status + amount_funded + listing_term + listing_monthly_payment + scorex + prosper_score + listing_category_id + stated_monthly_income + employment_status_description + occupation + lender_indicator + monthly_debt + current_delinquencies + first_recorded_credit_line + amount_delinquent + bankcard_utilization + total_open_revolving_accounts + real_estate_balance + was_delinquent_derog + delinquencies_over30_days + is_homeowner, data = listings)

summary(model1)
```

## Model 2
### Includes Only Variables with Significant Contribution (coeff > 10^-5)
```{r}
model2 <-lm(borrower_rate ~ number_of_days + principal_balance + loan_status + amount_funded + listing_term + listing_monthly_payment + scorex + prosper_score + listing_category_id + employment_status_description + occupation + lender_indicator + monthly_debt + current_delinquencies + bankcard_utilization + total_open_revolving_accounts + was_delinquent_derog + delinquencies_over30_days + is_homeowner, data = listings)

summary(model2)
```

# Build Logistic Regression Model

```{r}
lrmodel1 <- glm(borrower_rate ~ number_of_days + principal_balance + loan_status + amount_funded + listing_term + listing_monthly_payment + scorex + prosper_score + listing_category_id + employment_status_description + occupation + lender_indicator + monthly_debt + current_delinquencies + bankcard_utilization + total_open_revolving_accounts + was_delinquent_derog + delinquencies_over30_days + is_homeowner, data = listings)

summary(lrmodel1)

```

# Final Analysis

The objective of this analysis was to determine relevant factors for determining credit rating, as well as dispell any myths regarding factors that don't truly matter.

## Factors that Matter Most
Based on the linear and logistic models above, we conclude that standard factors measuring the consumer's debt matter most, specifically:
- Bankcard Utilization
- Open Revolving Accounts
- Real Estate Balance


## Factors that can be Questioned
Based on the linear and logistic models above, we conclude that a few factors have the opposite effect of the general public narrative. Specifically:
- Bank Card Utilization
- Open Revolving Accounts
- Real Estate Balance

The public narrative suggests that individuals with more debt should have more risk for taking on new debt, primarily measured by the debt-to-income ratio. That being said, the models suggest each of these factors translates to a better credit rating. This is likely due to the underlying behavior of the consumer. Opening credit lines requires a personal ability to manage finances and so long as these individuals do not have other indicators (such as delinquencies), they are actually more likely to be good candidates for opening additional credit lines.

## Suprises
Contrary to public opinion and logic, the models show that the increase in delinquencies translate to a higher credit score. It's possible that this is mechnically set to increase the pool of high-interest and high-fee consumers which may have a larger CLV, however more investigation is needed.

## Future Implications
Given these findings, we recommend an adjusted approach to setting consumer rates at Prosper. Using a model as simple as KNN or as complex as ANN, Prosper can segment and classify future customers based on the factors that truly matter to credit rating, thereby increasig its chances of higher quality customers and reduced uncollectables.
